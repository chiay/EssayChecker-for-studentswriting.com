{"version":3,"file":"compromise-html.js","sources":["../node_modules/htm/dist/htm.module.js","../src/html.js","../src/index.js"],"sourcesContent":["var n=function(t,s,r,e){var u;s[0]=0;for(var h=1;h<s.length;h++){var p=s[h++],a=s[h]?(s[0]|=p?1:2,r[s[h++]]):s[++h];3===p?e[0]=a:4===p?e[1]=Object.assign(e[1]||{},a):5===p?(e[1]=e[1]||{})[s[++h]]=a:6===p?e[1][s[++h]]+=a+\"\":p?(u=t.apply(a,n(t,a,r,[\"\",null])),e.push(u),a[0]?s[0]|=2:(s[h-2]=0,s[h]=u)):e.push(a)}return e},t=new Map;export default function(s){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=n(this,r.get(s)||(r.set(s,r=function(n){for(var t,s,r=1,e=\"\",u=\"\",h=[0],p=function(n){1===r&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?h.push(0,n,e):3===r&&(n||e)?(h.push(3,n,e),r=2):2===r&&\"...\"===e&&n?h.push(4,n,0):2===r&&e&&!n?h.push(5,0,!0,e):r>=5&&((e||!n&&5===r)&&(h.push(r,0,e,s),r=6),n&&(h.push(r,n,0,s),r=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===r&&p(),p(a));for(var l=0;l<n[a].length;l++)t=n[a][l],1===r?\"<\"===t?(p(),h=[h],r=3):e+=t:4===r?\"--\"===e&&\">\"===t?(r=1,e=\"\"):e=t+e[0]:u?t===u?u=\"\":e+=t:'\"'===t||\"'\"===t?u=t:\">\"===t?(p(),r=1):r&&(\"=\"===t?(r=5,s=e,e=\"\"):\"/\"===t&&(r<5||\">\"===n[a][l+1])?(p(),3===r&&(h=h[0]),r=h,(h=h[0]).push(2,0,r),r=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(p(),r=2):e+=t),3===r&&\"!--\"===e&&(r=4,h=h[0])}return p(),h}(s)),r),arguments,[])).length>1?r:r[0]}\n","const htm = require('htm')\nconst vhtml = require('vhtml')\n\nconst toHtml = function(doc, segments, options) {\n  let h = htm.bind(vhtml)\n  if (options.bind) {\n    h = htm.bind(options.bind)\n  }\n  let html = []\n  let arr = doc.segment(segments)\n  arr.forEach(o => {\n    let str = h`<span class=${o.segment}>${o.text}</span>`\n    html.push(str)\n  })\n  return h`<pre>${html}</pre>`\n}\nmodule.exports = toHtml\n","const toHtml = require('./html')\n\nconst addMethods = function(Doc) {\n  /** generate sanitized html from the document */\n  Doc.prototype.html = function(segments = {}, options = {}) {\n    return toHtml(this, segments, options)\n  }\n}\nmodule.exports = addMethods\n"],"names":["n","t","s","r","e","u","h","length","p","a","Object","assign","apply","push","Map","get","set","replace","l","arguments","toHtml","doc","segments","options","htm","bind","vhtml","html","arr","segment","forEach","o","str","text","addMethods","Doc","prototype"],"mappings":"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"}